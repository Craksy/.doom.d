;;; $DOOMDIR/config.el -*- lexical-binding: t; -*-

;;Load config modules
(load! "custom-functions.el") ;;utilities and helpers that my config depends on
(load! "keybindings.el")      ;;My key bindings

;; General configuration variables
(setq
 ;;Personal information used by different packages
 user-full-name    "Silas Wagner"
 user-mail-address "craksyw@gmail.com"

 ;;editor behavior
 evil-split-window-below   t
 evil-vsplit-window-right  t
 display-line-numbers-type 'visual
 which-key-idle-delay      0.3

 ;;Looks
 doom-theme                'doom-dracula
 doom-font                 "DejaVu Sans Code-11"
 fancy-splash-image        "~/Pictures/arch-trans.png"
)

;; Package specific configurations
;; Org-mode
(after! org
  (setq org-startup-with-inline-images t
        org-directory "~/Documents/org/"
        org-agenda-files '("~Documents/org/notes.org"
                           "~Documents/org/todo.org"
                           "~Documents/org/projects.org"))
  (add-to-list 'org-capture-templates
               '("s" "Scheduled Task" entry
                 (file+headline "todo.org" "Inbox")
                 "* [ ] %?\n SCHEDULED: %t")))


(after! org-roam
  (setq org-roam-directory "/home/amnesia/Documents/org-roam/"))

;; Projectile
(after! projectile
  (setq projectile-auto-discover t
        projectile-project-search-path '("~/projects/")))

;; Avy
(after! avy
  (setq avy-all-windows t
        avy-single-candidate-jump t
        avy-timeout-seconds 0.3))

;; Elcord
(after! elcord
  (setq elcord-use-major-mode-as-main-icon t))

(after! company
  (setq company-show-numbers t)
  )


(use-package! info-colors
  :commands (info-colors-fontify-node))

(add-hook 'Info-selection-hook 'info-colors-fontify-node)
;; (add-hook 'Info-mode-hook #'mixed-pitch-mode)

(defadvice! prompt-for-buffer (&rest _)
  "switch buffer"
  :after '(evil-window-split evil-window-vsplit)
  (+ivy/projectile-find-file))
(setq +ivy-buffer-preview t)

;; Hook and misc stuff
;; (add-hook 'after-init-hook 'org-roam-mode) ;; do i actually need this?

